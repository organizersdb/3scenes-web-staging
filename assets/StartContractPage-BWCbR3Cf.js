import{j as t,_ as Z,G as J,H as Ke,I as Be,r as c,K as jr,u as yr,Q as Dr,A as wr,T as Ar,e as Cr,f as Or,a as Ae,h as Er,B as L,M as We,U as Fr}from"./index-D_Je3U8E.js";import{u as _r,C as Sr,b as Ve}from"./Input-ILcMCOfW.js";import{P as d}from"./index-DK4Fe9Kk.js";import{S as Y,a as kr}from"./SectionTitle-BCAYL0my.js";import{E as Nr,D as E}from"./Edit-GG4YlHQq.js";import{A as Pr,B as Tr}from"./Back-wPoXBxy0.js";import"./hoist-non-react-statics.cjs-DwsWGffi.js";function Ue(){return t.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("mask",{id:"mask0_3096_1205",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"48",height:"48",children:t.jsx("rect",{width:"48",height:"48",fill:"#D9D9D9"})}),t.jsx("g",{mask:"url(#mask0_3096_1205)",children:t.jsx("path",{d:"M10 42V40.4615H38V42H10ZM19.269 34.4615V20.8845H12.719L24 6L35.231 20.8845H28.6925V34.4615H19.269ZM20.8075 32.923H27.154V18.919H31.7385L24 8.5155L16.223 18.919H20.8075V32.923Z",fill:"#1C1B1F"})})]})}var Ir=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ne(e,r){var n=Rr(e);if(typeof n.path!="string"){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof r=="string"?r:typeof i=="string"&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Rr(e){var r=e.name,n=r&&r.lastIndexOf(".")!==-1;if(n&&!e.type){var i=r.split(".").pop().toLowerCase(),o=Ir.get(i);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var Mr=[".DS_Store","Thumbs.db"];function zr(e){return Z(this,void 0,void 0,function(){return J(this,function(r){return pe(e)&&Lr(e.dataTransfer)?[2,Kr(e.dataTransfer,e.type)]:Xr(e)?[2,$r(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,Hr(e)]:[2,[]]})})}function Lr(e){return pe(e)}function Xr(e){return pe(e)&&pe(e.target)}function pe(e){return typeof e=="object"&&e!==null}function $r(e){return Ee(e.target.files).map(function(r){return ne(r)})}function Hr(e){return Z(this,void 0,void 0,function(){var r;return J(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){return i.getFile()}))];case 1:return r=n.sent(),[2,r.map(function(i){return ne(i)})]}})})}function Kr(e,r){return Z(this,void 0,void 0,function(){var n,i;return J(this,function(o){switch(o.label){case 0:return e.items?(n=Ee(e.items).filter(function(s){return s.kind==="file"}),r!=="drop"?[2,n]:[4,Promise.all(n.map(Br))]):[3,2];case 1:return i=o.sent(),[2,qe(ir(i))];case 2:return[2,qe(Ee(e.files).map(function(s){return ne(s)}))]}})})}function qe(e){return e.filter(function(r){return Mr.indexOf(r.name)===-1})}function Ee(e){if(e===null)return[];for(var r=[],n=0;n<e.length;n++){var i=e[n];r.push(i)}return r}function Br(e){if(typeof e.webkitGetAsEntry!="function")return Ge(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?ar(r):Ge(e)}function ir(e){return e.reduce(function(r,n){return Ke(Ke([],Be(r),!1),Be(Array.isArray(n)?ir(n):[n]),!1)},[])}function Ge(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var n=ne(r);return Promise.resolve(n)}function Wr(e){return Z(this,void 0,void 0,function(){return J(this,function(r){return[2,e.isDirectory?ar(e):Vr(e)]})})}function ar(e){var r=e.createReader();return new Promise(function(n,i){var o=[];function s(){var u=this;r.readEntries(function(f){return Z(u,void 0,void 0,function(){var p,g,j;return J(this,function(h){switch(h.label){case 0:if(f.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return p=h.sent(),n(p),[3,4];case 3:return g=h.sent(),i(g),[3,4];case 4:return[3,6];case 5:j=Promise.all(f.map(Wr)),o.push(j),s(),h.label=6;case 6:return[2]}})})},function(f){i(f)})}s()})}function Vr(e){return Z(this,void 0,void 0,function(){return J(this,function(r){return[2,new Promise(function(n,i){e.file(function(o){var s=ne(o,e.fullPath);n(s)},function(o){i(o)})})]})})}var Ce=function(e,r){if(e&&r){var n=Array.isArray(r)?r:r.split(","),i=e.name||"",o=(e.type||"").toLowerCase(),s=o.replace(/\/.*$/,"");return n.some(function(u){var f=u.trim().toLowerCase();return f.charAt(0)==="."?i.toLowerCase().endsWith(f):f.endsWith("/*")?s===f.replace(/\/.*$/,""):o===f})}return!0};function Ye(e){return Gr(e)||qr(e)||sr(e)||Ur()}function Ur(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gr(e){if(Array.isArray(e))return Fe(e)}function Ze(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function Je(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ze(Object(n),!0).forEach(function(i){or(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function or(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function te(e,r){return Jr(e)||Zr(e,r)||sr(e,r)||Yr()}function Yr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sr(e,r){if(e){if(typeof e=="string")return Fe(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,r)}}function Fe(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=e[n];return i}function Zr(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],o=!0,s=!1,u,f;try{for(n=n.call(e);!(o=(u=n.next()).done)&&(i.push(u.value),!(r&&i.length===r));o=!0);}catch(p){s=!0,f=p}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw f}}return i}}function Jr(e){if(Array.isArray(e))return e}var Qr=typeof Ce=="function"?Ce:Ce.default,et="file-invalid-type",rt="file-too-large",tt="file-too-small",nt="too-many-files",it=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var n=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:et,message:"File type must be ".concat(n)}},Qe=function(r){return{code:rt,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},er=function(r){return{code:tt,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},at={code:nt,message:"Too many files"};function lr(e,r){var n=e.type==="application/x-moz-file"||Qr(e,r);return[n,n?null:it(r)]}function cr(e,r,n){if(X(e.size))if(X(r)&&X(n)){if(e.size>n)return[!1,Qe(n)];if(e.size<r)return[!1,er(r)]}else{if(X(r)&&e.size<r)return[!1,er(r)];if(X(n)&&e.size>n)return[!1,Qe(n)]}return[!0,null]}function X(e){return e!=null}function ot(e){var r=e.files,n=e.accept,i=e.minSize,o=e.maxSize,s=e.multiple,u=e.maxFiles,f=e.validator;return!s&&r.length>1||s&&u>=1&&r.length>u?!1:r.every(function(p){var g=lr(p,n),j=te(g,1),h=j[0],O=cr(p,i,o),I=te(O,1),P=I[0],R=f?f(p):null;return h&&P&&!R})}function me(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function de(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function rr(e){e.preventDefault()}function st(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function lt(e){return e.indexOf("Edge/")!==-1}function ct(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return st(e)||lt(e)}function _(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return r.some(function(f){return!me(i)&&f&&f.apply(void 0,[i].concat(s)),me(i)})}}function ut(){return"showOpenFilePicker"in window}function ft(e){if(X(e)){var r=Object.entries(e).filter(function(n){var i=te(n,2),o=i[0],s=i[1],u=!0;return ur(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),u=!1),(!Array.isArray(s)||!s.every(fr))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),u=!1),u}).reduce(function(n,i){var o=te(i,2),s=o[0],u=o[1];return Je(Je({},n),{},or({},s,u))},{});return[{description:"Files",accept:r}]}return e}function dt(e){if(X(e))return Object.entries(e).reduce(function(r,n){var i=te(n,2),o=i[0],s=i[1];return[].concat(Ye(r),[o],Ye(s))},[]).filter(function(r){return ur(r)||fr(r)}).join(",")}function pt(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function mt(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function ur(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function fr(e){return/^.*\.[\w]+$/.test(e)}var xt=["children"],gt=["open"],ht=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],vt=["refKey","onChange","onClick"];function bt(e){return Dt(e)||yt(e)||dr(e)||jt()}function jt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dt(e){if(Array.isArray(e))return _e(e)}function Oe(e,r){return Ct(e)||At(e,r)||dr(e,r)||wt()}function wt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dr(e,r){if(e){if(typeof e=="string")return _e(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,r)}}function _e(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=e[n];return i}function At(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],o=!0,s=!1,u,f;try{for(n=n.call(e);!(o=(u=n.next()).done)&&(i.push(u.value),!(r&&i.length===r));o=!0);}catch(p){s=!0,f=p}finally{try{!o&&n.return!=null&&n.return()}finally{if(s)throw f}}return i}}function Ct(e){if(Array.isArray(e))return e}function tr(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function m(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?tr(Object(n),!0).forEach(function(i){Se(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Se(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function xe(e,r){if(e==null)return{};var n=Ot(e,r),i,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],!(r.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Ot(e,r){if(e==null)return{};var n={},i=Object.keys(e),o,s;for(s=0;s<i.length;s++)o=i[s],!(r.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Ne=c.forwardRef(function(e,r){var n=e.children,i=xe(e,xt),o=mr(i),s=o.open,u=xe(o,gt);return c.useImperativeHandle(r,function(){return{open:s}},[s]),jr.createElement(c.Fragment,null,n(m(m({},u),{},{open:s})))});Ne.displayName="Dropzone";var pr={disabled:!1,getFilesFromEvent:zr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Ne.defaultProps=pr;Ne.propTypes={children:d.func,accept:d.objectOf(d.arrayOf(d.string)),multiple:d.bool,preventDropOnDocument:d.bool,noClick:d.bool,noKeyboard:d.bool,noDrag:d.bool,noDragEventsBubbling:d.bool,minSize:d.number,maxSize:d.number,maxFiles:d.number,disabled:d.bool,getFilesFromEvent:d.func,onFileDialogCancel:d.func,onFileDialogOpen:d.func,useFsAccessApi:d.bool,autoFocus:d.bool,onDragEnter:d.func,onDragLeave:d.func,onDragOver:d.func,onDrop:d.func,onDropAccepted:d.func,onDropRejected:d.func,onError:d.func,validator:d.func};var ke={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function mr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=m(m({},pr),e),n=r.accept,i=r.disabled,o=r.getFilesFromEvent,s=r.maxSize,u=r.minSize,f=r.multiple,p=r.maxFiles,g=r.onDragEnter,j=r.onDragLeave,h=r.onDragOver,O=r.onDrop,I=r.onDropAccepted,P=r.onDropRejected,R=r.onFileDialogCancel,F=r.onFileDialogOpen,$=r.useFsAccessApi,A=r.autoFocus,M=r.preventDropOnDocument,C=r.noClick,H=r.noKeyboard,ie=r.noDrag,S=r.noDragEventsBubbling,K=r.onError,k=r.validator,T=c.useMemo(function(){return dt(n)},[n]),Q=c.useMemo(function(){return ft(n)},[n]),B=c.useMemo(function(){return typeof F=="function"?F:nr},[F]),W=c.useMemo(function(){return typeof R=="function"?R:nr},[R]),v=c.useRef(null),y=c.useRef(null),ae=c.useReducer(Et,ke),N=Oe(ae,2),ee=N[0],D=N[1],xr=ee.isFocused,Pe=ee.isFileDialogActive,oe=c.useRef(typeof window<"u"&&window.isSecureContext&&$&&ut()),Te=function(){!oe.current&&Pe&&setTimeout(function(){if(y.current){var l=y.current.files;l.length||(D({type:"closeDialog"}),W())}},300)};c.useEffect(function(){return window.addEventListener("focus",Te,!1),function(){window.removeEventListener("focus",Te,!1)}},[y,Pe,W,oe]);var V=c.useRef([]),Ie=function(l){v.current&&v.current.contains(l.target)||(l.preventDefault(),V.current=[])};c.useEffect(function(){return M&&(document.addEventListener("dragover",rr,!1),document.addEventListener("drop",Ie,!1)),function(){M&&(document.removeEventListener("dragover",rr),document.removeEventListener("drop",Ie))}},[v,M]),c.useEffect(function(){return!i&&A&&v.current&&v.current.focus(),function(){}},[v,A,i]);var z=c.useCallback(function(a){K?K(a):console.error(a)},[K]),Re=c.useCallback(function(a){a.preventDefault(),a.persist(),ue(a),V.current=[].concat(bt(V.current),[a.target]),de(a)&&Promise.resolve(o(a)).then(function(l){if(!(me(a)&&!S)){var x=l.length,b=x>0&&ot({files:l,accept:T,minSize:u,maxSize:s,multiple:f,maxFiles:p,validator:k}),w=x>0&&!b;D({isDragAccept:b,isDragReject:w,isDragActive:!0,type:"setDraggedFiles"}),g&&g(a)}}).catch(function(l){return z(l)})},[o,g,z,S,T,u,s,f,p,k]),Me=c.useCallback(function(a){a.preventDefault(),a.persist(),ue(a);var l=de(a);if(l&&a.dataTransfer)try{a.dataTransfer.dropEffect="copy"}catch{}return l&&h&&h(a),!1},[h,S]),ze=c.useCallback(function(a){a.preventDefault(),a.persist(),ue(a);var l=V.current.filter(function(b){return v.current&&v.current.contains(b)}),x=l.indexOf(a.target);x!==-1&&l.splice(x,1),V.current=l,!(l.length>0)&&(D({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),de(a)&&j&&j(a))},[v,j,S]),se=c.useCallback(function(a,l){var x=[],b=[];a.forEach(function(w){var re=lr(w,T),G=Oe(re,2),he=G[0],ve=G[1],be=cr(w,u,s),fe=Oe(be,2),je=fe[0],ye=fe[1],De=k?k(w):null;if(he&&je&&!De)x.push(w);else{var we=[ve,ye];De&&(we=we.concat(De)),b.push({file:w,errors:we.filter(function(br){return br})})}}),(!f&&x.length>1||f&&p>=1&&x.length>p)&&(x.forEach(function(w){b.push({file:w,errors:[at]})}),x.splice(0)),D({acceptedFiles:x,fileRejections:b,type:"setFiles"}),O&&O(x,b,l),b.length>0&&P&&P(b,l),x.length>0&&I&&I(x,l)},[D,f,T,u,s,p,O,I,P,k]),le=c.useCallback(function(a){a.preventDefault(),a.persist(),ue(a),V.current=[],de(a)&&Promise.resolve(o(a)).then(function(l){me(a)&&!S||se(l,a)}).catch(function(l){return z(l)}),D({type:"reset"})},[o,se,z,S]),U=c.useCallback(function(){if(oe.current){D({type:"openDialog"}),B();var a={multiple:f,types:Q};window.showOpenFilePicker(a).then(function(l){return o(l)}).then(function(l){se(l,null),D({type:"closeDialog"})}).catch(function(l){pt(l)?(W(l),D({type:"closeDialog"})):mt(l)?(oe.current=!1,y.current?(y.current.value=null,y.current.click()):z(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):z(l)});return}y.current&&(D({type:"openDialog"}),B(),y.current.value=null,y.current.click())},[D,B,W,$,se,z,Q,f]),Le=c.useCallback(function(a){!v.current||!v.current.isEqualNode(a.target)||(a.key===" "||a.key==="Enter"||a.keyCode===32||a.keyCode===13)&&(a.preventDefault(),U())},[v,U]),Xe=c.useCallback(function(){D({type:"focus"})},[]),$e=c.useCallback(function(){D({type:"blur"})},[]),He=c.useCallback(function(){C||(ct()?setTimeout(U,0):U())},[C,U]),q=function(l){return i?null:l},ge=function(l){return H?null:q(l)},ce=function(l){return ie?null:q(l)},ue=function(l){S&&l.stopPropagation()},gr=c.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=a.refKey,x=l===void 0?"ref":l,b=a.role,w=a.onKeyDown,re=a.onFocus,G=a.onBlur,he=a.onClick,ve=a.onDragEnter,be=a.onDragOver,fe=a.onDragLeave,je=a.onDrop,ye=xe(a,ht);return m(m(Se({onKeyDown:ge(_(w,Le)),onFocus:ge(_(re,Xe)),onBlur:ge(_(G,$e)),onClick:q(_(he,He)),onDragEnter:ce(_(ve,Re)),onDragOver:ce(_(be,Me)),onDragLeave:ce(_(fe,ze)),onDrop:ce(_(je,le)),role:typeof b=="string"&&b!==""?b:"presentation"},x,v),!i&&!H?{tabIndex:0}:{}),ye)}},[v,Le,Xe,$e,He,Re,Me,ze,le,H,ie,i]),hr=c.useCallback(function(a){a.stopPropagation()},[]),vr=c.useMemo(function(){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=a.refKey,x=l===void 0?"ref":l,b=a.onChange,w=a.onClick,re=xe(a,vt),G=Se({accept:T,multiple:f,type:"file",style:{display:"none"},onChange:q(_(b,le)),onClick:q(_(w,hr)),tabIndex:-1},x,y);return m(m({},G),re)}},[y,n,f,le,i]);return m(m({},ee),{},{isFocused:xr&&!i,getRootProps:gr,getInputProps:vr,rootRef:v,inputRef:y,open:q(U)})}function Et(e,r){switch(r.type){case"focus":return m(m({},e),{},{isFocused:!0});case"blur":return m(m({},e),{},{isFocused:!1});case"openDialog":return m(m({},ke),{},{isFileDialogActive:!0});case"closeDialog":return m(m({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return m(m({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return m(m({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return m({},ke);default:return e}}function nr(){}const Rt=()=>{var ae;const{jobId:e,screenwriterId:r,contractId:n}=yr(),{contract:i,saveContract:o}=c.useContext(Dr),{authUser:s,authSwrFetcher:u}=c.useContext(wr),{theme:f,showAlert:p}=c.useContext(Ar),{createContract:g}=c.useContext(Cr),[j,h]=c.useState(null),O=Or(),[I,P]=c.useState(!1),[R,F]=c.useState(!1),{data:$}=Ae(e?`/job/view?id=${e}`:null,u),{data:A}=Ae(r?`/screenwriter/view?id=${r}`:null,u),{data:M}=Ae(`/profile/get?id=${s==null?void 0:s.id}`,u),C=M==null?void 0:M.companies[0],{register:H,control:ie,trigger:S,formState:{isDirty:K,errors:k},handleSubmit:T,watch:Q}=_r({mode:"onChange",defaultValues:i}),B=c.useCallback(async()=>{O("/acknowledgement",{state:{initialCountdown:5,heading:"你的合約申請已成功遞交！",paragraphs:["3scenes.io 將會於 3 個工作天內審閱申請，成功申請將會刊登於本平台。","如有任何查詢，請聯絡 info@3scenes.io"],countdownText:"頁面將於{countdown}秒後返回 Dashboard",redirectPath:"/dashboard"}})},[O]),W=c.useCallback(async N=>{(await o({...N,status:"draft"})).id?(p({severity:"SUCCESS",content:"草稿已成功儲存！"}),O("/dashboard")):(F(!1),p({severity:"ERROR",content:"抱歉，系統遇到技術問題，請稍後重試。若問題持續，請與我們聯絡。"}))},[O,o,p]),v=c.useCallback(()=>{F(!0)},[]),y=c.useCallback(async N=>{F(!0),(await g({...N,jobId:e,screenwriterId:r,status:"open"})).id?B():(F(!1),p({severity:"ERROR",content:"抱歉，系統遇到技術問題，請稍後重試。若問題持續，請與我們聯絡。"}))},[g,B]);return t.jsxs("form",{children:[j?t.jsxs("div",{className:"my-3 flex gap-x-2 align-middle",onClick:()=>h(null),children:[t.jsx(Pr,{}),t.jsx("span",{children:"返回"})]}):t.jsx(Tr,{}),t.jsx("h1",{className:"text-center font-sans text-xl font-bold md:text-left md:text-3xl",children:"處理合約"}),t.jsx("p",{className:"mt-4",children:"您必須在5個工作天內完成合約草擬，否則此合作會被取消。"}),t.jsxs("section",{className:Er("mt-10 grid gap-6",!j&&"md:grid-cols-2"),children:[(!j||j==="upload")&&t.jsx(Ft,{onFileDrop:()=>h("upload"),onFileRemove:()=>h(null)}),!j&&t.jsxs("div",{className:"flex aspect-square flex-col items-center justify-center rounded-3xl border border-black text-center",onClick:()=>h("draft"),children:[t.jsxs("div",{className:"flex items-center gap-x-2 text-3xl font-bold",children:[t.jsx(Nr,{className:"h-12 w-12"}),"在 3scenes.io 草擬合約"," "]}),t.jsx("p",{className:"mt-6 max-w-[60%] font-serif text-sm",children:"推薦您使用此功能以得到更多保障，合約將根據 3scenes.io 的條款撰寫，您將可更有效率及保證地管理此合作"})]}),j==="draft"&&t.jsxs("div",{className:"flex max-w-lg flex-col gap-y-16 md:ml-32",children:[t.jsxs("section",{className:"leading-8",children:[t.jsx(Y,{current:1,total:6,title:"委託方／受託方資料"}),t.jsxs("div",{children:[t.jsx(E,{label:"委託方",value:`${(ae=$==null?void 0:$.company)==null?void 0:ae.name}（以下簡稱「甲方」） `}),t.jsx(E,{label:"聯絡人",value:t.jsx("span",{children:C==null?void 0:C.contactPerson})}),t.jsx(E,{label:"聯絡電話",value:t.jsx("span",{children:C==null?void 0:C.phone})}),t.jsx(E,{label:"商業登記",value:t.jsx("span",{children:C==null?void 0:C.br})})]}),t.jsxs("div",{children:[t.jsx(E,{label:"受託方",value:`${s==null?void 0:s.displayName}（以下簡稱「乙方」）`}),t.jsx(E,{label:"聯絡人",value:t.jsx("span",{children:A.contactPerson})}),t.jsx(E,{label:"聯絡電話",value:t.jsx("span",{children:A.phone})}),t.jsx(E,{label:"商業登記",value:t.jsx("span",{children:A.br})})]})]}),t.jsxs("section",{className:"leading-8",children:[t.jsx(Y,{current:2,total:6,title:"合約目的"}),t.jsxs("ol",{className:"ml-4 list-decimal",children:[t.jsx("li",{children:t.jsx(E,{label:"合約目的",value:"項目（電影或電視），某製作公司聘請某編劇寫劇本。"})}),t.jsx("li",{children:t.jsx(E,{label:"版權所屬",value:t.jsx(Sr,{name:"copyrightOwner",control:ie,rules:{required:"請選擇版權所屬"},render:({field:N})=>t.jsx(kr,{...N,options:["情況1：較常見的情況，劇本是委託性質的工作。（commissioned work / work- for-hire） 即原概念是源自某製作公司，編劇是協助完善概念，又或者是編劇是在包薪金的情況下，編劇構思出的概念。以上兩種情況，一般來說，版權屬以投資金錢的付費編劇的電影或製作公司。","情況2：在編劇沒有受聘的情況下，如原概念是源自編劇並且產生，編劇在沒收取過任何人的稿費，則版權屬於編劇本人；如商談拍成電影或電視劇，編劇作為原創者可出售部份或全部版權，跟電影或製作公司商討一個雙方滿意的商業決定及具法律約束力的安排。"],label:"版權所屬",hintText:"（單選）",componentTheme:f,errors:k})})})}),t.jsx("li",{children:t.jsx(E,{label:"意圖",value:"甲方、乙方雙方願意努力完成合約。"})}),t.jsx("li",{children:t.jsx("p",{children:"根據香港特別行政區的法律遵守。"})})]})]}),t.jsxs("section",{className:"leading-8",children:[t.jsx(Y,{current:3,total:6,title:"工作內容及要求"}),t.jsxs("ol",{className:"ml-4 list-decimal",children:[t.jsx("li",{children:"乙方編寫原創／改編電影劇本，直至獲得甲方最終認可後形成最終拍攝劇本；"}),t.jsx("li",{children:"乙方要開會和資料蒐集；"}),t.jsx("li",{children:"各階段工作的生效日期。【註：視乎項目規模，通常訂明於半年至一年內完成】"}),t.jsxs("li",{children:["乙方交付的內容：【註：視乎合作形式，可包含以上單一或全部】",t.jsxs("ol",{type:"i",className:"ml-6 list-[lower-roman]",children:[t.jsx("li",{children:"劇本大綱；"}),t.jsx("li",{children:"人物小傳；"}),t.jsx("li",{children:"劇本詳細分場及"}),t.jsx("li",{children:"劇本初稿"}),t.jsx("li",{children:"修改稿 （視乎需要多少稿，因人而異）"}),t.jsx("li",{children:"最終拍攝劇本等"})]})]}),t.jsx("li",{children:"乙方工作是否包括跟場編劇【註：請編劇自行考慮工作和時間成本】"})]})]}),t.jsxs("section",{className:"leading-8",children:[t.jsx(Y,{current:4,total:6,title:"工作成果、進度及交付要求"}),t.jsx("p",{children:"乙方須按照如下時間安排和要求向甲方提供下列工作成果（下稱「成果」）："}),t.jsxs("p",{children:["提交日期：合約生效後",t.jsx("span",{className:"text-red",children:"XXXX"}),"星期提交相關內容"]}),t.jsxs("ol",{className:"ml-4 list-decimal",children:[t.jsxs("li",{children:["於",t.jsx("span",{className:"text-red",children:"20XX年X月X日"}),"前，就階段，提交相關內容（如：故事大綱和人物小傳）。為各種內容定下",t.jsx("span",{className:"text-red",children:"XX"}),"字數要求。"]}),t.jsxs("li",{children:["每完成一階段，甲方有",t.jsx("span",{className:"text-red",children:"XX"}),"X日審核和回饋意見。"]}),t.jsxs("li",{children:["甲方回饋意見後，乙方有",t.jsx("span",{className:"text-red",children:"XX"}),"日修改。"]}),t.jsxs("li",{children:["最終拍攝劇本不應少於",t.jsx("span",{className:"text-red",children:"XX"}),"字,並可滿足影片片長不少於",t.jsx("span",{className:"text-red",children:"XX"}),"分鐘之要求。"]}),t.jsx("li",{children:"在創作過程中，如甲方、乙方成員雙方對創作出現意見分歧，以甲方意見為準。"})]}),t.jsxs("div",{children:[t.jsx("span",{children:"拍攝劇本字數不得少於"}),t.jsx(Ve,{fieldName:"minDurationInMinute",register:H,watch:Q,errors:k,placeholder:"請填寫字數",maxLength:10})]}),t.jsxs("div",{children:[t.jsx("span",{children:"可滿足影片片長不少於"}),t.jsx(Ve,{fieldName:"minDurationInMinute",register:H,watch:Q,errors:k,placeholder:"請填寫片長分鐘",maxLength:10})]})]}),t.jsxs("section",{className:"leading-8",children:[t.jsx(Y,{current:5,total:6,title:"服務費及支付"}),t.jsxs("ol",{className:"ml-4 list-decimal",children:[t.jsx("li",{children:"甲方同意乙方如約履行相應階段的義務後，按如下比例以轉帳方式分期向乙方支付服務費【應列明含稅與否】"}),t.jsxs("li",{children:["支付方法如下：第一期 ( 開筆費/開會費或傳統稱為「訂金」 ) :",t.jsx("br",{}),t.jsxs("ol",{className:"ml-6 list-[lower-alpha]",children:[t.jsxs("li",{children:["各方簽署生效後",t.jsx("span",{className:"text-red",children:"XX"}),"個工作日內"]}),t.jsxs("li",{children:["支付上述服務費的百份之",t.jsx("span",{className:"text-red",children:"XX"})," ","（",t.jsx("span",{className:"text-red",children:"XX"}),"%），"]}),t.jsxs("li",{children:["即港幣",t.jsx("span",{className:"text-red",children:"XX"}),"元整 （阿拉伯數字",t.jsx("span",{className:"text-red",children:"XX"}),"）。"]})]}),t.jsx("br",{}),"第二期：（如故事大綱 ＋ 人物小傳）: 付款方式參考以上第一期的三個重點。",t.jsx("br",{}),"第三期 : 劇本初稿",t.jsx("br",{}),"第四期 : 劇本二稿",t.jsx("br",{}),"第五期: 最終拍攝稿。【如此類推，視乎雙方定立第幾稿為最終拍攝稿】"]}),t.jsxs("li",{children:["發票：",t.jsxs("ol",{className:"ml-6 list-[lower-alpha]",children:[t.jsx("li",{children:"乙方提供發票以收取每期稿費。"}),t.jsxs("li",{children:["( 如與香港地區以外製作單位合作 ) 乙方須在收到甲方每次付款後",t.jsx("span",{className:"text-red",children:"XX"}),"個工作日內向甲方開具相應金額之有效加值稅專用發票。"]})]})]}),t.jsxs("li",{children:["乙方確認，乙方的帳戶資訊如下所示：",t.jsx("br",{}),"帳號名稱：",t.jsx("span",{className:"text-red",children:"XX"}),t.jsx("br",{}),"開戶銀行：",t.jsx("span",{className:"text-red",children:"XX"}),t.jsx("br",{}),"銀行帳號：",t.jsx("span",{className:"text-red",children:"XX"}),t.jsx("br",{})]})]}),t.jsxs("p",{className:"mt-4 text-sm text-indigo",children:["資料從",A==null?void 0:A.name,"個人檔案中提取，",A==null?void 0:A.name,"稍後可在草擬中更改。"]})]}),t.jsxs("section",{className:"leading-8",children:[t.jsx(Y,{current:6,total:6,title:"甲方權利和義務"}),t.jsxs("ol",{className:"ml-4 list-decimal",children:[t.jsx("li",{children:"一般委託劇本情況： 甲方對劇本創作擁有最終決定權。"}),t.jsxs("li",{children:["雙方終止合約時，在甲方提出合理原因的前提下，並經雙方盡一切合理的努力協商後，甲方有權不支付後續任何費用。",t.jsx("br",{}),"情況如：項目停止退進 、編劇不在時限內交稿、編劇工作未合甲方需求。）"]}),t.jsx("li",{children:"編劇署名事宜。"}),t.jsx("li",{children:"甲方有權了解乙方進度。"}),t.jsx("li",{children:"甲方應按照本協議約定向乙方支付相應服務費。"}),t.jsx("li",{children:"乙方保密。"}),t.jsx("li",{children:"乙方的創作內容不侵犯任何第三人權利；"}),t.jsx("li",{children:"乙方成員創作的任何成果應當為乙方成員本人親自完成,不得由他人代為完成。"}),t.jsx("li",{children:"如乙方在履行合約期間受邀為任何第三方創作/編寫/改編相同題材的故事/劇本需通知甲方並獲得甲方同意方可接受。"}),t.jsx("li",{children:"乙方成員在創作過程中遵守職業道德和法律規定，不含誹謗、不剽竊和抄襲或翻譯他人作品。"}),t.jsx("li",{children:"乙方成員是否跟場。（一般是，跟場才列明。）"}),t.jsx("li",{children:"甲方在影片的衍生品。"}),t.jsx("li",{children:"甲方有權轉讓本協定中享有之權利。"}),t.jsx("li",{children:"保證甲方能隨時與乙方成員聯絡。"})]})]})]})]}),j&&t.jsxs("section",{className:"flex justify-center gap-x-8 py-10",children:[t.jsx(L,{text:"取消",type:"reset",onClick:()=>P(!0)}),t.jsx(L,{text:"儲存草稿",onClick:()=>{T(W)()}}),t.jsx(L,{className:`${K?"border-indigo bg-indigo":"bg-zinc-400"} text-white`,text:n?"更新合約":"建立合約",disabled:!K,onClick:async()=>{await S()&&v()}})]}),t.jsx(We,{isOpen:I,onClose:()=>P(!1),children:t.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center gap-y-2 py-10 text-center",children:[t.jsxs("div",{className:"font-serif text-3xl font-bold",children:["你確定要取消",n?"更新":"建立",t.jsx("br",{}),"新合約嗎？"]}),t.jsx("div",{className:"font-light",children:"3scenes 不會紀錄未儲存資料"}),t.jsx("div",{className:"flex gap-x-3",children:t.jsx(L,{text:"取消建立",type:"button",onClick:()=>O("/dashboard")})})]})}),t.jsx(We,{isOpen:R,onClose:()=>F(!1),children:t.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center gap-y-2 py-10 text-center",children:[t.jsxs("div",{className:"font-serif text-3xl font-bold",children:["你確定要",n?"更新":"建立",t.jsx("br",{}),"合約嗎？"]}),t.jsx("div",{className:"font-light",children:"徵稿啟事將刊登於 3Scenes 網頁"}),t.jsxs("div",{className:"flex gap-x-3",children:[t.jsx(L,{text:"返回",type:"button",onClick:()=>F(!1)}),t.jsx(L,{className:"border-indigo bg-indigo text-white",text:n?"更新合約":"建立合約",type:"button",onClick:T(y)})]})]})})]})},Ft=({onFileDrop:e,onFileRemove:r})=>{const n=c.useCallback(g=>{console.log(g),e()},[e]),{acceptedFiles:i,getRootProps:o,getInputProps:s,isDragActive:u,open:f}=mr({onDrop:n,maxFiles:1,accept:{"application/pdf":[".pdf"]}}),p=c.useCallback(()=>{Array.isArray(i)&&i.splice(0,i.length),r()},[i,r]);return t.jsxs("div",{className:"relative flex aspect-square flex-col items-center justify-center rounded-3xl border border-black text-center",...o(),children:[t.jsx("input",{...s()}),u?t.jsx("p",{children:"將合約拖拉到此上傳 "}):i.length>0?t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsxs("div",{className:"flex items-center gap-x-2 text-3xl font-bold",children:[t.jsx(Ue,{}),"已上傳合約"]}),i.map(g=>t.jsxs("div",{className:"mt-4",children:[g.path," - ",Fr(g.size)]},g.path)),t.jsx(L,{className:"border-indigo bg-indigo text-white",text:"移除文件",onClick:g=>{g.stopPropagation(),p()}})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-x-2 text-3xl font-bold",children:[t.jsx(Ue,{}),"上傳合約"]}),t.jsxs("p",{className:"mt-6 max-w-[60%] font-serif text-sm",children:["將合約拖拉或",t.jsx("span",{onClick:f,className:"underline",children:"按此"}),"上傳，雙方將使用 Adobe 簽署合約"]}),t.jsx("p",{className:"mt-6 max-w-[60%] font-serif text-sm text-indigo",children:"支援格式：pdf"})]})]})};export{Rt as default};
