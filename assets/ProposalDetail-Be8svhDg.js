import{j as s,R as h,P as j,n as f,o as b,p as g,q as u,C as p,r as v,A as N,f as w,a as C,s as k,B as y}from"./index-D_Je3U8E.js";import{D as O}from"./DiscordButton-DuXtYCjK.js";import{A as S}from"./Avatar-DDAoMGYo.js";import{S as I}from"./Separator-ByB699LM.js";import{S as P}from"./SceneCard-z2ZceIV2.js";const $=({isOpen:e,onClose:a,children:i,title:r})=>s.jsx(h,{open:e,onOpenChange:a,children:s.jsxs(j,{children:[s.jsx(f,{className:"fixed inset-0 bg-black bg-opacity-40"}),s.jsxs(b,{className:"fixed right-0 top-0 flex h-screen w-7/12 flex-col gap-y-8 overflow-y-auto bg-white p-24 text-black transition-transform",onClick:t=>t.stopPropagation(),children:[s.jsx(g,{className:"sr-only",children:r}),s.jsx(u,{asChild:!0,children:s.jsx("button",{className:"fixed right-2 top-2 p-2",children:s.jsx(p,{pathClassName:"fill-black"})})}),i]})]})}),L=({proposal:e,onClose:a})=>{var l,c;const{authSwrFetcher:i}=v.useContext(N),r=w(),{data:t}=C(e?`/script/view?id=${e.scriptId}`:null,i);if(!e||!t)return s.jsx(s.Fragment,{});const{logline:x,outline:d,scenes:n}=t;return s.jsxs($,{isOpen:!!e.scriptId,onClose:a,children:[s.jsx("div",{children:"New tab"}),s.jsx(k,{to:`/proposal/${e.id}`,target:"_blank",children:"full screen"}),s.jsxs("section",{className:"flex flex-wrap justify-between",children:[s.jsxs("div",{className:"flex items-baseline gap-x-4",children:[s.jsx(S,{name:(l=e.screenwriter)==null?void 0:l.name,img:(c=e.screenwriter)==null?void 0:c.avatar}),s.jsx("div",{className:"font-bold",children:"薪金要求TODO"})]}),s.jsxs("div",{className:"flex gap-x-4",children:[s.jsx(O,{}),s.jsx(y,{className:"border-indigo bg-indigo text-white",text:"開始合作",onClick:()=>r(`/contract/${e.jobId}/${e.screenwriterId}/start`)})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"border-b border-black py-2 font-serif text-3xl",children:t.title}),s.jsxs("div",{className:"mt-8 font-serif",children:[s.jsxs("div",{children:["LOGLINE: ",x]}),s.jsxs("div",{className:"mt-4",children:["故事大綱： ",d]})]}),s.jsx(I,{}),s.jsx("div",{children:"三場戲"}),n==null?void 0:n.map((o,m)=>{if(o)return s.jsx("div",{children:s.jsx(P,{scene:o})},m)})]})]})};export{L as P};
