import{r as p,T as G,e as V,f as B,j as n,B as R,M as q}from"./index-D_Je3U8E.js";import{u as W,T as $,b as _}from"./Input-ILcMCOfW.js";import{R as z}from"./RadioGroup-HLXvLdSu.js";import{S as X}from"./Separator-ByB699LM.js";import{P as h}from"./index-DK4Fe9Kk.js";import{h as K}from"./hoist-non-react-statics.cjs-DwsWGffi.js";var Z=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function T(){return T=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},T.apply(this,arguments)}function J(r,a){if(r==null)return{};var o={},t=Object.keys(r),e,d;for(d=0;d<t.length;d++)e=t[d],!(a.indexOf(e)>=0)&&(o[e]=r[e]);return o}function E(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Q(r,a){r.prototype=Object.create(a.prototype),r.prototype.constructor=r,P(r,a)}function P(r,a){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(r,a)}var I=function(r){Q(a,r);function a(){var t;return t=r.call(this)||this,t.handleExpired=t.handleExpired.bind(E(t)),t.handleErrored=t.handleErrored.bind(E(t)),t.handleChange=t.handleChange.bind(E(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(E(t)),t}var o=a.prototype;return o.getCaptchaFunction=function(e){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[e]:this.props.grecaptcha[e]:null},o.getValue=function(){var e=this.getCaptchaFunction("getResponse");return e&&this._widgetId!==void 0?e(this._widgetId):null},o.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},o.execute=function(){var e=this.getCaptchaFunction("execute");if(e&&this._widgetId!==void 0)return e(this._widgetId);this._executeRequested=!0},o.executeAsync=function(){var e=this;return new Promise(function(d,v){e.executionResolve=d,e.executionReject=v,e.execute()})},o.reset=function(){var e=this.getCaptchaFunction("reset");e&&this._widgetId!==void 0&&e(this._widgetId)},o.forceReset=function(){var e=this.getCaptchaFunction("reset");e&&e()},o.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},o.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},o.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},o.explicitRender=function(){var e=this.getCaptchaFunction("render");if(e&&this._widgetId===void 0){var d=document.createElement("div");this._widgetId=e(d,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(d)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},o.componentDidMount=function(){this.explicitRender()},o.componentDidUpdate=function(){this.explicitRender()},o.handleRecaptchaRef=function(e){this.captcha=e},o.render=function(){var e=this.props;e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,e.isolated;var d=J(e,Z);return p.createElement("div",T({},d,{ref:this.handleRecaptchaRef}))},a}(p.Component);I.displayName="ReCAPTCHA";I.propTypes={sitekey:h.string.isRequired,onChange:h.func,grecaptcha:h.object,theme:h.oneOf(["dark","light"]),type:h.oneOf(["image","audio"]),tabindex:h.number,onExpired:h.func,onErrored:h.func,size:h.oneOf(["compact","normal","invisible"]),stoken:h.string,hl:h.string,badge:h.oneOf(["bottomright","bottomleft","inline"]),isolated:h.bool};I.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};function F(){return F=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(r[t]=o[t])}return r},F.apply(this,arguments)}function Y(r,a){if(r==null)return{};var o={},t=Object.keys(r),e,d;for(d=0;d<t.length;d++)e=t[d],!(a.indexOf(e)>=0)&&(o[e]=r[e]);return o}function ee(r,a){r.prototype=Object.create(a.prototype),r.prototype.constructor=r,r.__proto__=a}var m={},te=0;function ne(r,a){return a=a||{},function(t){var e=t.displayName||t.name||"Component",d=function(w){ee(g,w);function g(y,s){var i;return i=w.call(this,y,s)||this,i.state={},i.__scriptURL="",i}var l=g.prototype;return l.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+te++),this.__scriptLoaderID},l.setupScriptURL=function(){return this.__scriptURL=typeof r=="function"?r():r,this.__scriptURL},l.asyncScriptLoaderHandleLoad=function(s){var i=this;this.setState(s,function(){return i.props.asyncScriptOnLoad&&i.props.asyncScriptOnLoad(i.state)})},l.asyncScriptLoaderTriggerOnScriptLoaded=function(){var s=m[this.__scriptURL];if(!s||!s.loaded)throw new Error("Script is not loaded.");for(var i in s.observers)s.observers[i](s);delete window[a.callbackName]},l.componentDidMount=function(){var s=this,i=this.setupScriptURL(),u=this.asyncScriptLoaderGetScriptLoaderID(),c=a,S=c.globalName,C=c.callbackName,L=c.scriptId;if(S&&typeof window[S]<"u"&&(m[i]={loaded:!0,observers:{}}),m[i]){var j=m[i];if(j&&(j.loaded||j.errored)){this.asyncScriptLoaderHandleLoad(j);return}j.observers[u]=function(f){return s.asyncScriptLoaderHandleLoad(f)};return}var k={};k[u]=function(f){return s.asyncScriptLoaderHandleLoad(f)},m[i]={loaded:!1,observers:k};var b=document.createElement("script");b.src=i,b.async=!0;for(var x in a.attributes)b.setAttribute(x,a.attributes[x]);L&&(b.id=L);var N=function(O){if(m[i]){var H=m[i],A=H.observers;for(var M in A)O(A[M])&&delete A[M]}};C&&typeof window<"u"&&(window[C]=function(){return s.asyncScriptLoaderTriggerOnScriptLoaded()}),b.onload=function(){var f=m[i];f&&(f.loaded=!0,N(function(O){return C?!1:(O(f),!0)}))},b.onerror=function(){var f=m[i];f&&(f.errored=!0,N(function(O){return O(f),!0}))},document.body.appendChild(b)},l.componentWillUnmount=function(){var s=this.__scriptURL;if(a.removeOnUnmount===!0)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u+=1)i[u].src.indexOf(s)>-1&&i[u].parentNode&&i[u].parentNode.removeChild(i[u]);var c=m[s];c&&(delete c.observers[this.asyncScriptLoaderGetScriptLoaderID()],a.removeOnUnmount===!0&&delete m[s])},l.render=function(){var s=a.globalName,i=this.props;i.asyncScriptOnLoad;var u=i.forwardedRef,c=Y(i,["asyncScriptOnLoad","forwardedRef"]);return s&&typeof window<"u"&&(c[s]=typeof window[s]<"u"?window[s]:void 0),c.ref=u,p.createElement(t,c)},g}(p.Component),v=p.forwardRef(function(w,g){return p.createElement(d,F({},w,{forwardedRef:g}))});return v.displayName="AsyncScriptLoader("+e+")",v.propTypes={asyncScriptOnLoad:h.func},K(v,t)}}var D="onloadcallback",re="grecaptcha";function U(){return typeof window<"u"&&window.recaptchaOptions||{}}function ie(){var r=U(),a=r.useRecaptchaNet?"recaptcha.net":"www.google.com";return r.enterprise?"https://"+a+"/recaptcha/enterprise.js?onload="+D+"&render=explicit":"https://"+a+"/recaptcha/api.js?onload="+D+"&render=explicit"}const ae=ne(ie,{callbackName:D,globalName:re,attributes:U().nonce?{nonce:U().nonce}:{}})(I),he=()=>{const{showAlert:r}=p.useContext(G),{registerAccount:a}=p.useContext(V),o=p.useRef(null),t=p.useRef(null),e=B(),[d,v]=p.useState(!1),[w,g]=p.useState(!1),{register:l,trigger:y,formState:{isDirty:s,errors:i},handleSubmit:u,watch:c}=W({mode:"onChange"}),{ref:S,...C}=l("companyFile"),L=c("companyFile"),j=p.useCallback(async()=>{e("/acknowledgement",{state:{initialCountdown:5,heading:"你的工作啟示申請已成功遞交！",paragraphs:["3scenes.io 將會於 3 個工作天內審閱申請，成功申請將會刊登於本平台。","如有任何查詢，請聯絡 info@3scenes.io"],countdownText:"頁面將於{countdown}秒後返回 Dashboard",redirectPath:"/dashboard"}})},[e]),k=p.useCallback(()=>{g(!0)},[]),b=p.useCallback(async x=>{if(t.current===null)return;const N=await t.current.executeAsync();N&&(await a(x,N)?j():(g(!1),r({severity:"ERROR",content:"抱歉，系統遇到技術問題，請稍後重試。若問題持續，請與我們聯絡。"})))},[j]);return n.jsx("div",{className:"flex max-w-2xl justify-center",children:n.jsxs("form",{className:"flex max-w-lg flex-col",children:[n.jsx("h1",{className:"text-center font-sans text-xl font-bold md:text-left md:text-3xl",children:"歡迎註冊 3scenes 帳户"}),n.jsx(X,{className:"hidden md:block"}),n.jsx("p",{children:"無論你是電影公司 / 編劇均可在本平台尋找下一個機會！加入 3scenes 只需幾項資料："}),n.jsxs("div",{className:"mt-12 flex flex-col gap-y-16",children:[n.jsxs("section",{children:[n.jsxs("div",{className:"flex items-center gap-x-2",children:[n.jsx("h2",{className:"text-xl font-bold",children:"你用甚麼身分使用平台？"}),n.jsx($,{dataToolTipId:"identity-tooltip",content:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"電影公司可在平台發佈徵稿啟示，並可建立更多分帳户管理工作。"}),n.jsx("p",{children:"編劇可在平台用參與活動，獲得工作機會，並在此管理合作，更有保障。"})]})})]}),n.jsx("div",{className:"flex flex-col gap-y-6 py-9",children:n.jsx(z,{label:"選擇你的身份（單選）：",fieldName:"identity",options:["電影公司","編劇"],register:l,watch:c,errors:i,validation:{required:"請選擇你的身份"}})})]}),c("identity")&&n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-bold",children:"公司資料"}),n.jsxs("div",{className:"flex flex-col gap-y-6 py-9",children:[c("identity")==="編劇"&&n.jsx(z,{label:"",fieldName:"isCompany",options:["我是自由工作者，沒法提供公司資料。","我可以提供公司資料。"],register:l,watch:c,errors:i,validation:{required:"請選擇公司資料。"},isVerticalList:!0}),(c("identity")==="編劇"&&c("isCompany")==="我可以提供公司資料。"||c("identity")==="電影公司")&&n.jsxs(n.Fragment,{children:[n.jsx(_,{fieldName:"companyName",register:l,watch:c,errors:i,placeholder:"請填寫公司名稱",maxLength:100,label:"公司名稱"}),n.jsx(_,{fieldName:"companyAddress",register:l,watch:c,errors:i,placeholder:"請填寫公司地址",maxLength:100,label:"公司地址"}),n.jsx(_,{fieldName:"companyBr",register:l,watch:c,errors:i,placeholder:"請填寫商業登記號碼",maxLength:10,label:"商業登記號碼"}),n.jsxs("div",{className:"flex items-center gap-x-4",children:[n.jsx("input",{type:"file",style:{display:"none"},accept:"image/png, image/jpeg, application/pdf",...C,ref:x=>{S(x),o.current=x}}),n.jsx(R,{text:L&&L.length>0?L[0].name:"上載檔案",onClick:()=>{var x;(x=o.current)==null||x.click()}}),n.jsx("span",{children:"支援格式：png、pdf、jpeg"})]}),n.jsx("p",{children:"上載商業登記證，讓 3scenes 認證身份。"})]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-bold",children:"管理員資料"}),n.jsxs("div",{className:"flex flex-col gap-y-6 py-9",children:[n.jsx(_,{fieldName:"representativeName",register:l,watch:c,errors:i,placeholder:"請填寫聯絡人名稱",maxLength:10,label:"聯絡人名稱",validation:{required:"請填寫聯絡人名稱"}}),n.jsx(_,{fieldName:"representativeMobile",register:l,watch:c,errors:i,placeholder:"請填寫聯絡電話",maxLength:8,label:"聯絡電話",validation:{required:"請填寫聯絡電話"}}),n.jsx(_,{fieldName:"representativeEmail",register:l,watch:c,errors:i,placeholder:"請填寫登入電郵地址",maxLength:100,label:"登入電郵地址",dataToolTipId:"email-tooltip",toolTipContent:n.jsx("p",{children:"3scenes 暫時只認證 Google、Microsoft 及 Apple 供應的電郵域名，以提供最安全的網站體驗，如有任何查詢，請聯絡 info@3scenes.io"}),validation:{required:"請填寫登入電郵地址"}})]})]}),n.jsxs("section",{className:"flex justify-end gap-x-8 py-10",children:[n.jsx(R,{text:"取消",type:"reset",onClick:()=>v(!0)}),n.jsx(R,{className:`${s?"border-indigo bg-indigo":"bg-zinc-400"} text-white`,text:"提交申請",disabled:!s,onClick:async()=>{await y()&&k()}})]})]}),n.jsx(q,{isOpen:d,onClose:()=>v(!1),children:n.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center gap-y-2 py-10 text-center",children:[n.jsx("div",{className:"font-serif text-3xl font-bold",children:"你確定取消提交開啟賬戶申請嗎？"}),n.jsxs("div",{className:"flex gap-x-3",children:[n.jsx(R,{text:"繼續建立",type:"button",onClick:()=>v(!1)}),n.jsx(R,{text:"取消建立",type:"button",onClick:()=>e("/")})]})]})}),n.jsx(q,{isOpen:w,onClose:()=>g(!1),children:n.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center gap-y-2 py-10 text-center",children:[n.jsx("div",{className:"font-serif text-3xl font-bold",children:"你確定提交開啟賬戶申請嗎？"}),n.jsx("div",{className:"font-light",children:"申請將由 3scenes 批核"}),n.jsxs("div",{className:"flex gap-x-3",children:[n.jsx(R,{text:"返回",type:"button",onClick:()=>g(!1)}),n.jsx(ae,{ref:t,sitekey:"6LdAVlgqAAAAACRroUi3XZpw3M3ROPfmDcCSX-IF",size:"invisible"}),n.jsx(R,{className:"border-indigo bg-indigo text-white",text:"提交申請",type:"button",onClick:u(b)})]})]})})]})})};export{he as default};
