import{f as j,j as e,l as p,B as g,r as h,A as m,a as f,L as v}from"./index-D_Je3U8E.js";import{S as N}from"./Search-CkF12ahv.js";import{S as y}from"./Status-z07AoAUc.js";const u=({id:l,title:n,publishedAt:c,updatedAt:a,proposalCnt:o,messagedCount:x,hiredCount:r,status:s})=>{const t=j();return e.jsxs("div",{className:"border-b border-gray-500 py-4",children:[e.jsx("h1",{children:n}),e.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-12",children:[e.jsx("div",{className:"col-span-3 flex flex-col gap-y-2 pb-8 md:pb-0",children:e.jsx("div",{className:"text-gray-500",children:c?`${p(new Date(c*1e3).toUTCString())}發布`:a?`${p(new Date(a*1e3).toUTCString())}最後更新`:""})}),e.jsx("div",{className:"col-span-2",children:s&&e.jsx(y,{status:s})}),e.jsxs("div",{className:"col-span-2 flex flex-col gap-y-2",children:[e.jsx("div",{children:s==="draft"?"N/A":o}),e.jsx("div",{className:"text-gray-500",children:"申請人數"})]}),e.jsxs("div",{className:"col-span-1 flex flex-col gap-y-2",children:[e.jsx("div",{children:s==="draft"?"N/A":x||0}),e.jsx("div",{className:"text-gray-500",children:"已聯絡"})]}),e.jsxs("div",{className:"col-span-1 flex flex-col gap-y-2",children:[e.jsx("div",{children:s==="draft"?"N/A":r||0}),e.jsx("div",{className:"text-gray-500",children:"已聘請"})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"col-span-4 justify-self-center py-8 md:justify-self-end md:py-0",children:[(s==="open"||s==="closed")&&e.jsx(g,{text:"查看申請",onClick:()=>t(`/job/${l}`)}),s==="draft"&&e.jsx(g,{text:"編輯徵稿",onClick:()=>t(`/job/${l}/edit`)})]})})]})]})},T=()=>{var t;const l=j(),{authUser:n,authSwrFetcher:c}=h.useContext(m),[a,o]=h.useState({page:0,pageSize:100,searchText:""}),x=h.useCallback(i=>{o(d=>({...d,searchText:i}))},[]),{data:r,isLoading:s}=f(`/job?page=${a.page}&pageSize=${a.pageSize}&searchText=${a.searchText}`,c);return n?e.jsxs("div",{className:"grid-col grid gap-y-4 py-4 md:p-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-y-2 md:flex-row md:justify-between md:gap-y-0",children:[e.jsx("h1",{children:"我的徵稿啟事"}),e.jsx(g,{className:"border-indigo bg-indigo text-white",text:"發布徵稿啟事",onClick:()=>l("/job/new")})]}),e.jsx(N,{value:a.searchText??"",onChange:x}),e.jsx("div",{children:s?e.jsx(v,{}):(t=r==null?void 0:r.data)==null?void 0:t.sort((i,d)=>i.publishedAt&&d.publishedAt?i.publishedAt-d.publishedAt:0).map(i=>e.jsx(u,{...i},i.id))})]}):e.jsx(e.Fragment,{})};export{T as default};
