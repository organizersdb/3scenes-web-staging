import{r as a,T as O,u as P,e as V,J as G,f as U,A as z,j as e,B as r,M as J}from"./index-D_Je3U8E.js";import{u as H,b as v,C as j}from"./Input-ILcMCOfW.js";import{T as K}from"./Textarea-QWig5_4q.js";import{S as f,a as g}from"./SectionTitle-BCAYL0my.js";import{R as T}from"./RadioGroup-HLXvLdSu.js";import{S as Q}from"./Separator-ByB699LM.js";import"./hoist-non-react-statics.cjs-DwsWGffi.js";const te=()=>{var k,M;const{theme:l}=a.useContext(O),{jobId:d}=P(),{createJob:w,updateJob:S}=a.useContext(V),{job:b,saveJob:B}=a.useContext(G),{showAlert:x}=a.useContext(O),m=U(),[E,N]=a.useState(!1),[I,n]=a.useState(!1),{companies:L}=a.useContext(z),y=((k=b==null?void 0:b.company)==null?void 0:k.id)||((M=L[0])==null?void 0:M.id),{register:o,control:u,trigger:q,formState:{errors:s},handleSubmit:R,watch:c}=H({mode:"onChange",defaultValues:b}),C=a.useCallback(async()=>{m("/acknowledgement",{state:{initialCountdown:5,heading:"你的工作啟示申請已成功遞交！",paragraphs:["3scenes.io 將會於 3 個工作天內審閱申請，成功申請將會刊登於本平台。","如有任何查詢，請聯絡 info@3scenes.io"],countdownText:"頁面將於{countdown}秒後返回 Dashboard",redirectPath:"/dashboard"}})},[m]),A=a.useCallback(async t=>{(await B({...t,companyId:y,status:"draft"})).id?(x({severity:"SUCCESS",content:"草稿已成功儲存！"}),m("/dashboard")):(n(!1),x({severity:"ERROR",content:"抱歉，系統遇到技術問題，請稍後重試。若問題持續，請與我們聯絡。"}))},[m,B,x]),D=a.useCallback(()=>{n(!0)},[]),F=a.useCallback(async t=>{n(!0),t.id?(await S({...t,companyId:y,status:"open"})).id?C():(n(!1),x({severity:"ERROR",content:"抱歉，系統遇到技術問題，請稍後重試。若問題持續，請與我們聯絡。"})):(await w({...t,companyId:y,status:"open"})).id?C():(n(!1),x({severity:"ERROR",content:"抱歉，系統遇到技術問題，請稍後重試。若問題持續，請與我們聯絡。"}))},[w,C,S]);return e.jsx("div",{className:"flex max-w-2xl justify-center",children:e.jsxs("form",{className:"flex max-w-lg flex-col",children:[e.jsxs("h1",{className:"text-center font-sans text-xl font-bold md:text-left md:text-3xl",children:[d?"更新":"發布","徵稿啟事"," "]}),e.jsx(Q,{className:"hidden md:block"}),e.jsxs("div",{className:"mt-12 flex flex-col gap-y-16",children:[e.jsxs("section",{children:[e.jsx(f,{current:1,total:5,title:"你想發布那一類型的徵稿啟事？"}),e.jsx("div",{className:"flex flex-col gap-y-6 py-9",children:e.jsx(T,{label:"合作模式（單選）：",fieldName:"collabMode",options:["具體工作","初期開發","撈橋"],register:o,watch:c,errors:s,validation:{required:"請選擇合作模式"}})})]}),e.jsxs("section",{children:[e.jsx(f,{current:2,total:5,title:"為你的徵稿啟事起題"}),e.jsx("p",{className:"text-sm",children:"想將你的構思化為故事橋段？你可以寫一個有趣的題目引起編劇興趣，亦可以詳述你需要的服務內容，讓編劇馬上瞭解到你的需要。"}),e.jsxs("div",{className:"flex flex-col gap-y-2 py-[60px]",children:[e.jsx(v,{watch:c,fieldName:"title",register:o,errors:s,maxLength:25,label:"題目",hintText:"（25字元）",theme:l,dataToolTipId:"title-tooltip",toolTipContent:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-2",children:"例子："}),e.jsxs("ul",{className:"list-[square] pl-4",children:[e.jsx("li",{children:"一對新婚夫婦突然遇上車禍…"}),e.jsx("li",{children:"一個科學家意外穿越時空，回到秦朝…"}),e.jsx("li",{children:"緊急重寫喜劇劇本（已有分場、初稿）"}),e.jsx("li",{children:"尋找代筆，代寫大綱及簡單分場"})]})]}),validation:{required:"請輸入題目"}}),e.jsx(j,{name:"projectType",control:u,rules:{required:"請選擇項目規模"},render:({field:t})=>e.jsx(g,{...t,options:["參展短片","網絡短片","劇情長片","電視劇","舞台劇場","廣播劇","教學內容"],label:"項目規模",hintText:"（單選）",componentTheme:l,errors:s})}),e.jsx(j,{name:"categories",control:u,rules:{required:"請選擇類型"},render:({field:t})=>e.jsx(g,{...t,options:["教學內容","劇情","愛情","喜劇","家庭","警匪","犯罪","恐怖","懸疑","動作","武俠","古裝","科幻","律政","運動","推理","青春","兒童","記錄片","短片劇本","英語劇本"],label:"類型",hintText:"（最多兩項）",isMulti:!0,componentTheme:l,max:2,errors:s})})]})]}),e.jsxs("section",{children:[e.jsx(f,{current:3,total:5,title:"請估算一下這個項目的規模和編劇的工作範圍"}),e.jsx("p",{className:"text-sm",children:"請填寫以下資訊，幫助我們為你推薦符合你需要的合適人才。你之後仍可隨時修改詳情。"}),e.jsxs("div",{className:"flex flex-col gap-y-2 py-[60px]",children:[e.jsx(j,{name:"helpNeed",control:u,rules:{required:"請選擇工作"},render:({field:t})=>e.jsx(g,{...t,options:["Research / 提供點子","試稿／劇本代筆","故事大綱","天書","其他文案","簡單分場","詳細分場","分場發展成劇本","緊急重寫／修改某稿","顧問／劇本醫生"],label:"在這個階段，你希望這次應徵的編劇能為你完成那一些工作？",hintText:"（可多選）",isMulti:!0,componentTheme:l,errors:s})}),e.jsx(j,{name:"deadline",control:u,rules:{required:"請選擇限期"},render:({field:t})=>e.jsx(g,{...t,options:["接單後1周內","接單後2周內","接單後1個月內","接單後2個月內","接單後3個月內"],label:"編劇需要在甚麼限期內完成以上工作？",hintText:"（單選）",componentTheme:l,errors:s})}),e.jsx(j,{name:"authorship",control:u,rules:{required:"請選擇署名權"},render:({field:t})=>e.jsx(g,{...t,options:["可議（或視乎實際參與程度）","編劇（單一編劇，或名單首名）","聯合編劇","編審","跟場編劇","故事","沒有署名（代筆）"],label:"完成以上工作後，編劇可得到甚麼署名權？",hintText:"（單選）",componentTheme:l,errors:s})}),e.jsx(T,{register:o,label:"完成以上工作後，編劇可保留那些部分的版權？（單選）",fieldName:"copyright",options:["可議","沒有版權"],watch:c,errors:s,validation:{required:"請選擇版權"}})]})]}),e.jsxs("section",{children:[e.jsx(f,{current:4,total:5,title:"你能為以上的工作提供多少預算？"}),e.jsx("p",{className:"text-sm",children:"我們會按此預算範圍為你尋找合適編劇。"}),e.jsxs("div",{className:"flex flex-col gap-y-6 py-9",children:[e.jsx(T,{register:o,fieldName:"rate",options:["月薪結算","定額結算"],watch:c,errors:s,validation:{required:"請選擇結算方式"}}),e.jsxs("div",{className:"gap-x-4 md:flex md:items-start",children:[e.jsx(v,{watch:c,type:"number",inputMode:"decimal",fieldName:"minBudget",register:o,errors:s,maxLength:10,label:"最少",theme:l,validation:{required:"請輸入最少預算",validate:{lessThanMaxBudget:(t,i)=>{const p=Number(t),h=Number(i.maxBudget);return!i.maxBudget||isNaN(h)||isNaN(p)?!0:h>p||"最多預算需高於最低預算"}}}}),e.jsx("span",{children:"-"}),e.jsx(v,{fieldName:"maxBudget",register:o,watch:c,errors:s,maxLength:10,label:"最多",theme:l,validation:{required:"請輸入最多預算",validate:{greaterThanMinBudget:(t,i)=>{const p=Number(t),h=Number(i.minBudget);return!i.minBudget||isNaN(p)||isNaN(h)?!0:p>h||"最多預算需高於最低預算"}}}})]})]})]}),e.jsxs("section",{children:[e.jsx(f,{current:5,total:5,title:"請詳述是次徵稿的工作內容",dataToolTipId:"title-5-tooltip",toolTipContent:e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-2",children:"編劇會想看到："}),e.jsxs("ul",{className:"list-[square] pl-4",children:[e.jsx("li",{children:"清晰列明你的期望"}),e.jsx("li",{children:"需要交付的檔案"}),e.jsx("li",{children:"良好的溝通"}),e.jsx("li",{children:"有關你或你的團隊的工作方式之細節"})]})]})}),e.jsx(K,{fieldName:"fullDescription",register:o,placeholder:"計劃簡介（少於 200字）",maxLength:200,errors:s,validation:{required:"請輸入計劃簡介",maxLength:{value:200,message:"最多輸入200字"}},theme:l})]}),e.jsxs("section",{className:"flex justify-end gap-x-8 py-10",children:[e.jsx(r,{text:"取消",type:"reset",onClick:()=>N(!0)}),e.jsx(r,{text:"儲存草稿",onClick:async()=>{await q()&&R(A)()}}),e.jsx(r,{className:"border-indigo bg-indigo text-white",text:d?"更新徵稿啟事":"發布徵稿啟事",onClick:async()=>{await q()&&D()}})]})]}),e.jsx(J,{isOpen:E,onClose:()=>N(!1),children:e.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center gap-y-2 py-10 text-center",children:[e.jsxs("div",{className:"font-serif text-3xl font-bold",children:["你確定要取消",d?"更新":"發布",e.jsx("br",{}),"新徵稿啟事嗎？"]}),e.jsx("div",{className:"font-light",children:"3scenes 不會紀錄未儲存資料"}),e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx(r,{text:"取消發布",type:"button",onClick:()=>m("/dashboard")}),e.jsx(r,{text:"繼續發布",type:"button",onClick:()=>N(!1)})]})]})}),e.jsx(J,{isOpen:I,onClose:()=>n(!1),children:e.jsxs("div",{className:"mx-auto flex w-64 flex-col items-center gap-y-2 py-10 text-center",children:[e.jsxs("div",{className:"font-serif text-3xl font-bold",children:["你確定要",d?"更新":"發布",e.jsx("br",{}),"徵稿啟事嗎？"]}),e.jsx("div",{className:"font-light",children:"徵稿啟事將刊登於 3Scenes 網頁"}),e.jsxs("div",{className:"flex gap-x-3",children:[e.jsx(r,{text:"返回",type:"button",onClick:()=>n(!1)}),e.jsx(r,{className:"border-indigo bg-indigo text-white",text:d?"更新徵稿啟事":"建立徵稿啟事",type:"button",onClick:R(F)})]})]})})]})})};export{te as default};
