import{f as p,j as a,B as h,r as x,A as f,a as j,L as S}from"./index-D_Je3U8E.js";import{S as v}from"./Search-CkF12ahv.js";import{A as u}from"./Avatar-DDAoMGYo.js";import{S as C}from"./Status-z07AoAUc.js";const y=({id:s,job:c,screenwriter:e,status:n,statusRemark:l,startTime:t,endTime:i})=>{const o=p();return a.jsxs("div",{className:"flex flex-col gap-y-6 border-b border-gray-500 py-4",children:[a.jsx("h2",{className:"font-serif text-4xl font-bold",children:c==null?void 0:c.title}),a.jsxs("div",{className:"grid grid-cols-12",children:[a.jsx("div",{className:"col-span-4",children:a.jsx(u,{name:e==null?void 0:e.name,img:e==null?void 0:e.avatar})}),n&&a.jsx(C,{status:n,statusRemark:l}),a.jsx("div",{className:"col-span-2 justify-self-end",children:a.jsx(h,{size:"small",text:"管理合約",onClick:()=>o(`/contracts/${s}`)})})]}),a.jsx("div",{className:"text-gray-500",children:t&&`${new Date(t*1e3).toUTCString()} - ${i?new Date(i*1e3).toUTCString():"Now"}`})]})},A=()=>{var g,m;const[s,c]=x.useState({page:0,pageSize:10,searchText:""}),{authUser:e,authSwrFetcher:n}=x.useContext(f),l=e==null?void 0:e.isScreenwriter,{data:t,isLoading:i}=j(`/contract?page=${s.page}&pageSize=${s.pageSize}&searchText=${s.searchText}${l?`&screenwriterId=${(g=e==null?void 0:e.screenwriter)==null?void 0:g.id}`:""}`,n),o=x.useCallback(d=>{c(r=>({...r,searchText:d}))},[]);return a.jsxs("div",{className:"grid-col grid gap-y-4 py-4 md:p-4",children:[a.jsx("div",{className:"flex flex-col items-center gap-y-2 md:flex-row md:justify-between md:gap-y-0",children:a.jsx("h1",{children:"我的合約"})}),a.jsx(v,{value:s.searchText??"",onChange:o}),a.jsx("div",{children:i?a.jsx(S,{}):(m=t==null?void 0:t.data)==null?void 0:m.map((d,r)=>a.jsx(y,{...d},`contract-${r}`))})]})};export{A as default};
